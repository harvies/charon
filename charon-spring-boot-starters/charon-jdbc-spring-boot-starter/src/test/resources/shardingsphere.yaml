databaseName: logic_db

props:
  sql-show: true
dataSources:
  ds_0:
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    url: jdbc:mysql://@charon.mysql.url@/ds_0?useServerPrepStmts=true&serverTimezone=UTC&useSSL=false&useLocalSessionState=true&characterEncoding=utf-8&allowPublicKeyRetrieval=true&rewriteBatchedStatements=true
    username: @charon.mysql.username@
    password: @charon.mysql.password@
  ds_1:
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    url: jdbc:mysql://@charon.mysql.url@/ds_1?useServerPrepStmts=true&serverTimezone=UTC&useSSL=false&useLocalSessionState=true&characterEncoding=utf-8&allowPublicKeyRetrieval=true&rewriteBatchedStatements=true
    username: @charon.mysql.username@
    password: @charon.mysql.password@
rules:
  - !SHARDING
    autoTables:
      t_user:
        actualDataSources: ds_0,ds_1
        keyGenerateStrategy:
          column: id
          keyGeneratorName: t_user_snowflake
        logicTable: t_user
        shardingStrategy:
          standard:
            shardingAlgorithmName: t_user_hash_mod
            shardingColumn: id
    keyGenerators:
      t_user_snowflake:
        type: snowflake
    shardingAlgorithms:
      t_user_hash_mod:
        props:
          sharding-count: '2'
        type: hash_mod
databaseName: logic_db

dataSources:
  ds_2:
    password: '123456'
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    url: jdbc:mysql://10.233.53.2:3306/ds_0?useServerPrepStmts=true&serverTimezone=UTC&useSSL=false&useLocalSessionState=true&characterEncoding=utf-8&allowPublicKeyRetrieval=true&rewriteBatchedStatements=true
    username: root_rw
  ds_3:
    password: '123456'
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    url: jdbc:mysql://10.233.53.2:3306/ds_1?useServerPrepStmts=true&serverTimezone=UTC&useSSL=false&useLocalSessionState=true&characterEncoding=utf-8&allowPublicKeyRetrieval=true&rewriteBatchedStatements=true
    username: root_rw
  ds_4:
    password: '123456'
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    url: jdbc:mysql://10.233.53.2:3306/ds_2?useServerPrepStmts=true&serverTimezone=UTC&useSSL=false&useLocalSessionState=true&characterEncoding=utf-8&allowPublicKeyRetrieval=true&rewriteBatchedStatements=true
    username: root_rw

rules:
  - !SHARDING
    autoTables:
      t_order:
        actualDataSources: ds_2,ds_3,ds_4
        keyGenerateStrategy:
          column: order_id
          keyGeneratorName: t_order_snowflake
        logicTable: t_order
        shardingStrategy:
          standard:
            shardingAlgorithmName: t_order_hash_mod
            shardingColumn: user_id
    keyGenerators:
      t_order_snowflake:
        type: snowflake
    shardingAlgorithms:
      t_order_hash_mod:
        props:
          sharding-count: '6'
        type: hash_mod